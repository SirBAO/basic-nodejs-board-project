<template>
  <div class="flex flex-col">
    <div class="post-header">
      <Breadcrumbs :current="t(pageType)" />
      <h1 class="post-title text-white uppercase">{{ title }}</h1>
    </div>
    <div class="main-grid">
      <div class="relative">
        <transition name="fade-slide-y" mode="out-in">
          <div v-show="isEmpty" class="post-html flex flex-col items-center">
            <h1>没有找到任何文章</h1>
            <svg-icon icon-class="empty-search" style="font-size: 35rem" />
          </div>
        </transition>
        <div class="flex flex-col relative">
          <ul class="grid grid-cols-1 md:grid-cols-1 xl:grid-cols-1 gap-8">
            <template v-if="posts.data.length === 0">
              <li v-for="n in 12" :key="n">
                <Article :data="{}" />
              </li>
            </template>
            <template v-else>
              <li v-for="post in posts.data" :key="post.slug">
                <Article :data="post" />
              </li>
            </template>
          </ul>

          <Paginator
            :pageSize="12"
            :pageTotal="pagination.pageTotal"
            :page="pagination.page"
            @pageChange="pageChangeHanlder"
          />
        </div>
      </div>
      <div>
        <Sidebar>
          <CategoryBox />
          <TagBox />
          <RecentComment />
        </Sidebar>
      </div>
    </div>
  </div>
</template>

<script lang="ts">
import {
  computed,
  defineComponent,
  onBeforeMount,
  onUnmounted,
  ref,
  watch
} from 'vue'
import { useI18n } from 'vue-i18n'
import {
  Sidebar,
  RecentComment,
  TagBox,
  CategoryBox
} from '@/components/Sidebar'
import Breadcrumbs from '@/components/Breadcrumbs.vue'
import Paginator from '@/components/Paginator.vue'
impo